<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${pageTitle != null ? pageTitle + ' - Category Management System - BT1709' : 'Category Management System - BT1709'}">Category Management System - BT1709</title>

    <!-- Bootstrap 5.3.0 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome 6.4.0 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Custom CSS File - Updated 2025-09-17 08:22:25 -->
    <link th:href="@{/css/style.css}" rel="stylesheet" type="text/css">

    <!-- Meta Information -->
    <meta name="description" content="Category Management System - Lâm Văn Dĩ (BT1709) - Spring Boot Web Application">
    <meta name="author" content="Lâm Văn Dĩ (@diiego05)">
    <meta name="keywords" content="Spring Boot, Thymeleaf, Category Management, BT1709, Web Development">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" th:href="@{/favicon.ico}">

    <style>
        /* Fallback CSS in case external file doesn't load */
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Ensure CSS is working indicator */
        .css-loaded {
            opacity: 1;
            transition: opacity 0.3s ease;
        }

        .css-not-loaded {
            opacity: 0.5;
        }
    </style>
</head>
<body class="css-loaded">
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg sticky-top">
        <div class="container">
            <a class="navbar-brand floating" th:href="@{/}">
                <i class="fas fa-layer-group me-2 glow"></i>
                <strong>Categories</strong>
                <small class="opacity-75 ms-2">BT1709</small>
            </a>

            <button class="navbar-toggler border-0 text-white" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <i class="fas fa-bars"></i>
            </button>

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link active" th:href="@{/categories}" th:classappend="${#httpServletRequest.requestURI.startsWith('/categories') ? 'active' : ''}">
                            <i class="fas fa-home me-2"></i>Categories
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" th:href="@{/categories/new}" th:classappend="${#httpServletRequest.requestURI == '/categories/new' ? 'active' : ''}">
                            <i class="fas fa-plus me-2"></i>Thêm mới
                        </a>
                    </li>
                </ul>

                <div class="text-end text-white">
                    <div class="d-flex align-items-center flex-wrap">
                        <div class="me-3 mb-1">
                            <i class="fab fa-github me-1"></i>
                            <strong th:text="'@diiego05'">@diiego05</strong>
                        </div>
                        <div class="me-3 mb-1">
                            <i class="fas fa-user me-1"></i>
                            <strong th:text="'BT1709'">BT1709</strong>
                        </div>
                        <div class="mb-1">
                            <i class="fas fa-clock me-1"></i>
                            <small th:text="'2025-09-17 08:22:25'">2025-09-17 08:22:25</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container mt-4">
        <!-- Breadcrumb Navigation -->
        <nav aria-label="breadcrumb" th:if="${pageTitle}" class="mb-4">
            <ol class="breadcrumb glass-card">
                <li class="breadcrumb-item">
                    <a th:href="@{/}" class="text-white text-decoration-none">
                        <i class="fas fa-home me-1"></i>Home
                    </a>
                </li>
                <li class="breadcrumb-item">
                    <a th:href="@{/categories}" class="text-white text-decoration-none">
                        <i class="fas fa-layer-group me-1"></i>Categories
                    </a>
                </li>
                <li class="breadcrumb-item active text-warning" aria-current="page" th:text="${pageTitle}">
                    Current Page
                </li>
            </ol>
        </nav>

        <!-- Alert Messages -->
        <div th:if="${success}" class="alert alert-success alert-dismissible fade show" role="alert">
            <i class="fas fa-check-circle me-2"></i>
            <span th:text="${success}">Success message</span>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>

        <div th:if="${error}" class="alert alert-danger alert-dismissible fade show" role="alert">
            <i class="fas fa-exclamation-triangle me-2"></i>
            <span th:text="${error}">Error message</span>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>

        <!-- Page Content -->
        <div layout:fragment="content">
            <!-- Default content if no fragment is provided -->
            <div class="text-center py-5">
                <div class="glass-card p-5">
                    <i class="fas fa-layer-group fa-4x text-white mb-3 floating"></i>
                    <h2 class="text-white mb-3">Category Management System</h2>
                    <p class="text-white mb-4">Beautiful glass morphism design with CSS styling</p>
                    <a th:href="@{/categories}" class="btn btn-primary btn-lg">
                        <i class="fas fa-arrow-right me-2"></i>View Categories
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 mb-4">
                    <h5><i class="fas fa-graduation-cap me-2 pulse"></i>Category Management System</h5>
                    <div class="mb-2">
                        <i class="fas fa-user me-2"></i>
                        <strong>Student:</strong> <span th:text="'Lâm Văn Dĩ (BT1709)'">Lâm Văn Dĩ (BT1709)</span>
                    </div>
                    <div class="mb-2">
                        <i class="fas fa-university me-2"></i>
                        <strong>Subject:</strong> <span th:text="'Lập Trình Web'">Lập Trình Web</span>
                    </div>
                    <div class="mb-2">
                        <i class="fas fa-school me-2"></i>
                        <strong>University:</strong> <span th:text="'Đại học Công nghiệp TP.HCM'">Đại học Công nghiệp TP.HCM</span>
                    </div>
                    <div class="mb-2">
                        <i class="fas fa-code me-2"></i>
                        <strong>Tech Stack:</strong> <span th:text="'Spring Boot + Thymeleaf + SQL Server'">Spring Boot + Thymeleaf + SQL Server</span>
                    </div>
                    <div class="mb-0">
                        <i class="fas fa-calendar me-2"></i>
                        <strong>Last Updated:</strong> <span th:text="'2025-09-17 08:22:25 UTC'">2025-09-17 08:22:25 UTC</span>
                    </div>
                </div>
                <div class="col-lg-6">
                    <h5><i class="fab fa-github me-2 glow"></i>Top 5 GitHub Repositories (@diiego05)</h5>
                    <div class="github-card">
                        <div class="repo-item">
                            <i class="fas fa-globe me-2 text-info category-icon"></i>
                            <a th:href="'https://github.com/diiego05/LapTrinhWeb_LamVanDi'" target="_blank" rel="noopener noreferrer">
                                <strong th:text="'LapTrinhWeb_LamVanDi'">LapTrinhWeb_LamVanDi</strong>
                            </a>
                            <small class="d-block text-muted mt-1" th:text="'Spring Boot Web Development Project'">Spring Boot Web Development Project</small>
                        </div>
                        <div class="repo-item">
                            <i class="fas fa-store me-2 text-success category-icon"></i>
                            <a th:href="'https://github.com/diiego05/DoAnLapTrinhWeb_AloTra'" target="_blank" rel="noopener noreferrer">
                                <strong th:text="'DoAnLapTrinhWeb_AloTra'">DoAnLapTrinhWeb_AloTra</strong>
                            </a>
                            <small class="d-block text-muted mt-1" th:text="'E-Commerce Tea Store Platform'">E-Commerce Tea Store Platform</small>
                        </div>
                        <div class="repo-item">
                            <i class="fas fa-robot me-2 text-warning category-icon"></i>
                            <a th:href="'https://github.com/diiego05/CaNhanAI'" target="_blank" rel="noopener noreferrer">
                                <strong th:text="'CaNhanAI'">CaNhanAI</strong>
                            </a>
                            <small class="d-block text-muted mt-1" th:text="'Personal AI Assistant with NLP'">Personal AI Assistant with NLP</small>
                        </div>
                        <div class="repo-item">
                            <i class="fas fa-gamepad me-2 text-danger category-icon"></i>
                            <a th:href="'https://github.com/diiego05/Caro-Game-AI'" target="_blank" rel="noopener noreferrer">
                                <strong th:text="'Caro-Game-AI'">Caro-Game-AI</strong>
                            </a>
                            <small class="d-block text-muted mt-1" th:text="'Strategic Game with AI Algorithm'">Strategic Game with AI Algorithm</small>
                        </div>
                        <div class="repo-item">
                            <i class="fas fa-microchip me-2 text-primary category-icon"></i>
                            <a th:href="'https://github.com/diiego05/web-iot'" target="_blank" rel="noopener noreferrer">
                                <strong th:text="'web-iot'">web-iot</strong>
                            </a>
                            <small class="d-block text-muted mt-1" th:text="'IoT Web Control & Monitoring'">IoT Web Control & Monitoring</small>
                        </div>
                    </div>
                </div>
            </div>
            <hr class="my-4" style="border-color: rgba(255,255,255,0.2);">
            <div class="text-center">
                <p class="mb-2">
                    <span th:text="'© 2025 Category Management System | '">© 2025 Category Management System | </span>
                    Built with <i class="fas fa-heart text-danger pulse"></i> by
                    <a th:href="'https://github.com/diiego05'" target="_blank" rel="noopener noreferrer" class="text-decoration-none">
                        <strong th:text="'@diiego05'">@diiego05</strong>
                    </a>
                </p>
                <small class="text-muted" th:text="'Bài tập Lập Trình Web - Trường Đại học Công nghiệp Thành phố Hồ Chí Minh'">
                    Bài tập Lập Trình Web - Trường Đại học Công nghiệp Thành phố Hồ Chí Minh
                </small>
                <div class="mt-2">
                    <small class="text-muted">
                        <i class="fas fa-code me-1"></i>
                        <span th:text="'Spring Boot 3.1.5'">Spring Boot 3.1.5</span> |
                        <i class="fas fa-leaf ms-2 me-1"></i>
                        <span th:text="'Thymeleaf'">Thymeleaf</span> |
                        <i class="fas fa-database ms-2 me-1"></i>
                        <span th:text="'SQL Server'">SQL Server</span> |
                        <i class="fas fa-server ms-2 me-1"></i>
                        <span th:text="'Port 8081'">Port 8081</span>
                    </small>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script th:inline="javascript">
        /*<![CDATA[*/
        // Thymeleaf variables with exact current time 2025-09-17 08:22:25
        const appConfig = {
            currentTime: /*[['2025-09-17 08:22:25']]*/ '2025-09-17 08:22:25',
            studentName: /*[['Lâm Văn Dĩ']]*/ 'Lâm Văn Dĩ',
            studentId: /*[['BT1709']]*/ 'BT1709',
            githubUsername: /*[['diiego05']]*/ 'diiego05',
            githubUrl: /*[['https://github.com/diiego05']]*/ 'https://github.com/diiego05',
            serverPort: /*[['8081']]*/ '8081',
            subject: /*[['Lập Trình Web']]*/ 'Lập Trình Web',
            university: /*[['Đại học Công nghiệp TP.HCM']]*/ 'Đại học Công nghiệp TP.HCM'
        };

        // Top 5 GitHub repositories with exact URLs from recent activity
        const githubRepos = [
            {
                name: 'LapTrinhWeb_LamVanDi',
                url: 'https://github.com/diiego05/LapTrinhWeb_LamVanDi',
                description: 'Spring Boot Web Development Project',
                icon: 'fas fa-globe',
                color: 'text-info'
            },
            {
                name: 'DoAnLapTrinhWeb_AloTra',
                url: 'https://github.com/diiego05/DoAnLapTrinhWeb_AloTra',
                description: 'E-Commerce Tea Store Platform',
                icon: 'fas fa-store',
                color: 'text-success'
            },
            {
                name: 'CaNhanAI',
                url: 'https://github.com/diiego05/CaNhanAI',
                description: 'Personal AI Assistant with NLP',
                icon: 'fas fa-robot',
                color: 'text-warning'
            },
            {
                name: 'Caro-Game-AI',
                url: 'https://github.com/diiego05/Caro-Game-AI',
                description: 'Strategic Game with AI Algorithm',
                icon: 'fas fa-gamepad',
                color: 'text-danger'
            },
            {
                name: 'web-iot',
                url: 'https://github.com/diiego05/web-iot',
                description: 'IoT Web Control & Monitoring',
                icon: 'fas fa-microchip',
                color: 'text-primary'
            }
        ];

        // Check if CSS is loaded
        function checkCSSLoaded() {
            const testElement = document.createElement('div');
            testElement.className = 'glass-card';
            testElement.style.position = 'absolute';
            testElement.style.top = '-1000px';
            document.body.appendChild(testElement);

            const computedStyle = window.getComputedStyle(testElement);
            const isLoaded = computedStyle.background !== 'rgba(0, 0, 0, 0)' &&
                           computedStyle.background !== 'transparent' &&
                           computedStyle.background !== '';

            document.body.removeChild(testElement);

            if (isLoaded) {
                document.body.classList.add('css-loaded');
                document.body.classList.remove('css-not-loaded');
                console.log('✅ CSS loaded successfully at: ' + appConfig.currentTime);
            } else {
                document.body.classList.add('css-not-loaded');
                document.body.classList.remove('css-loaded');
                console.warn('⚠️ CSS not loaded properly at: ' + appConfig.currentTime);
            }

            return isLoaded;
        }

        // Auto dismiss alerts after 5 seconds with beautiful animation
        setTimeout(function() {
            var alerts = document.querySelectorAll('.alert');
            alerts.forEach(function(alert) {
                alert.style.transform = 'translateX(100%)';
                alert.style.opacity = '0';
                setTimeout(() => {
                    if (alert.parentNode) {
                        alert.remove();
                    }
                }, 300);
            });
        }, 5000);

        // Beautiful confirm delete function
        function confirmDelete(name) {
            const message = `⚠️ Xác nhận xóa category\n\nBạn có chắc chắn muốn xóa category "${name}"?\n\n⚠️ Hành động này không thể hoàn tác!\n\nThời gian: ${appConfig.currentTime}`;
            return confirm(message);
        }

        // Enhanced form submission with loading effects
        document.addEventListener('DOMContentLoaded', function() {
            // Check CSS loading
            setTimeout(checkCSSLoaded, 100);

            // Add loading effects to all forms
            const forms = document.querySelectorAll('form');
            forms.forEach(form => {
                form.addEventListener('submit', function(e) {
                    const submitBtn = form.querySelector('button[type="submit"]');
                    if (submitBtn && !submitBtn.disabled) {
                        const originalText = submitBtn.innerHTML;
                        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Đang xử lý...';
                        submitBtn.disabled = true;
                        submitBtn.classList.add('loading');

                        // Auto-enable button after 10 seconds (fallback)
                        setTimeout(() => {
                            submitBtn.innerHTML = originalText;
                            submitBtn.disabled = false;
                            submitBtn.classList.remove('loading');
                        }, 10000);
                    }
                });
            });

            // Enhanced hover effects for cards
            const cards = document.querySelectorAll('.card, .glass-card');
            cards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-10px) scale(1.02)';
                });
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0) scale(1)';
                });
            });

            // Auto-focus first form input
            const firstInput = document.querySelector('form input:not([type="hidden"]):not([readonly])');
            if (firstInput) {
                setTimeout(() => firstInput.focus(), 100);
            }

            // Enhanced table row interactions
            const tableRows = document.querySelectorAll('table tbody tr');
            tableRows.forEach(row => {
                row.addEventListener('click', function(e) {
                    if (e.target.tagName !== 'BUTTON' && e.target.tagName !== 'A' && !e.target.closest('button') && !e.target.closest('a')) {
                        // Add click effect
                        this.style.transform = 'scale(0.98)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 150);
                    }
                });
            });

            // Initialize tooltips
            var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
            var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl);
            });

            console.log('🎓 Category Management System - BT1709');
            console.log('👨‍💻 Developer: ' + appConfig.studentName + ' (@' + appConfig.githubUsername + ')');
            console.log('📅 Current Time: ' + appConfig.currentTime);
            console.log('🏫 Subject: ' + appConfig.subject);
            console.log('🏢 University: ' + appConfig.university);
            console.log('🔗 GitHub: ' + appConfig.githubUrl);
            console.log('🌐 Server: http://localhost:' + appConfig.serverPort + '/categories');
            console.log('🌟 Top 5 GitHub Repositories:');
            githubRepos.forEach((repo, index) => {
                console.log(`  ${index + 1}. ${repo.name} - ${repo.description}`);
                console.log(`     URL: ${repo.url}`);
            });
            console.log('✨ Checking CSS loading...');
        });

        // Global error handler
        window.addEventListener('error', function(e) {
            console.error('Application Error:', e.error);
        });

        // Performance monitoring
        window.addEventListener('load', function() {
            const loadTime = performance.now();
            console.log(`⚡ Page loaded in ${Math.round(loadTime)}ms`);
            console.log(`🎨 CSS File: /static/css/style.css`);
            console.log(`📁 Template: category/list.html`);
        });
        /*]]>*/
    </script>

    <!-- Page specific scripts -->
    <div layout:fragment="scripts">
        <!-- Child templates can add additional scripts here -->
    </div>
</body>
</html>